<!DOCTYPE html>
<html lang="nl">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Strandcabines Blankenberge</title>
   <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
   <!-- FullCalendar CSS -->
   <link href='https://cdn.jsdelivr.net/npm/fullcalendar@5.10.0/main.min.css' rel='stylesheet' />
   <!-- Leaflet CSS voor OpenStreetMap -->
   <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
   <style>
       /* ... (bestaande stijlen blijven hetzelfde) */
       .fc-daygrid-day.booked {
           background-color: rgba(220, 53, 69, 0.1);
       }
       .fc-daygrid-day.available {
           background-color: rgba(40, 167, 69, 0.1);
       }
   </style>
</head>
<body class="bg-blue-50 min-h-screen">
   <div class="max-w-7xl mx-auto px-4 py-8">
       <header class="text-center mb-12">
           <h1 class="text-4xl font-bold text-blue-900 mb-4">Strandcabines Blankenberge</h1>
           <p class="text-blue-700">Verhuur seizoen 2025 - April tot September</p>
           <p class="text-red-600 mt-2">*Identiteitskaart vereist voor alle reserveringen</p>
       </header>

       <!-- ... (bestaande HTML code voor de strandcabines en locatie blijft hetzelfde) -->

       <!-- Beschikbaarheid -->
       <div class="mt-12 bg-white rounded-xl shadow-lg p-6">
           <h2 class="text-2xl font-bold text-blue-900 mb-4">Beschikbaarheid</h2>
           <p class="text-gray-600 mb-4">Bekijk hieronder de beschikbaarheid van onze strandcabines. Selecteer een cabine om de beschikbare periodes te zien.</p>
           
           <div class="cabin-selector">
               <button id="cabin1Button" class="cabin-button active" onclick="switchCabin(1)">Strandcabine 1</button>
               <button id="cabin2Button" class="cabin-button" onclick="switchCabin(2)">Strandcabine 2</button>
           </div>
           
           <div id="calendar" class="calendar-container"></div>
           
           <div class="legend">
               <div class="legend-item">
                   <div class="legend-color booked-color"></div>
                   <span>Geboekt</span>
               </div>
               <div class="legend-item">
                   <div class="legend-color available-color"></div>
                   <span>Beschikbaar</span>
               </div>
           </div>
           
           <p class="text-sm text-gray-500 mt-4">Laatste update: 15 maart 2025</p>
       </div>
   </div>

   <!-- ... (bestaande HTML code voor betalingsinformatie, beveiliging en privacy, en contactinformatie blijft hetzelfde) -->

   <!-- FullCalendar en Moment.js -->
   <script src='https://cdn.jsdelivr.net/npm/fullcalendar@5.10.0/main.min.js'></script>
   <script src='https://cdn.jsdelivr.net/npm/fullcalendar@5.10.0/locales/nl.js'></script>
   <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>

   <!-- Leaflet JavaScript voor OpenStreetMap -->
   <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>

   <script>
       // Functie om gebeurtenissen op te halen en te filteren
       async function getFilteredEvents(calendarUrl) {
           const response = await fetch(calendarUrl);
           const data = await response.text();
           const parser = new DOMParser();
           const xmlDoc = parser.parseFromString(data, "text/xml");
           const events = xmlDoc.getElementsByTagName("event");
           
           const filteredEvents = [];
           for (let event of events) {
               const title = event.getElementsByTagName("title")[0].textContent;
               if (title.toLowerCase().includes("reservatie")) {
                   const startDate = event.getElementsByTagName("startdate")[0].textContent;
                   const endDate = event.getElementsByTagName("enddate")[0].textContent;
                   filteredEvents.push({ title, startDate, endDate });
               }
           }
           return filteredEvents;
       }

       // Initialiseer de kalender
       let calendar;
       let activeCabin = 1;

       document.addEventListener('DOMContentLoaded', async function() {
           const calendarEl = document.getElementById('calendar');
           
           const cabin1Events = await getFilteredEvents("https://outlook.live.com/owa/calendar/00000000-0000-0000-0000-000000000000/f4c108f9-ae36-4c31-b132-2049d9a0d9f9/cid-249909C222CBB60C/calendar.xml");
           const cabin2Events = await getFilteredEvents("https://outlook.live.com/owa/calendar/00000000-0000-0000-0000-000000000000/1a338984-2500-4622-8b32-fa46fc73bdcb/cid-249909C222CBB60C/calendar.xml");
           
           // FullCalendar initialisatie
           calendar = new FullCalendar.Calendar(calendarEl, {
               initialView: 'dayGridMonth',
               headerToolbar: {
                   left: 'prev,next today',
                   center: 'title',
                   right: 'dayGridMonth,dayGridWeek'
               },
               events: cabin1Events,
               validRange: {
                   start: '2025-04-01',
                   end: '2025-10-01'
               },
               locale: 'nl',
               firstDay: 1, // Maandag als eerste dag van de week
               height: 'auto',
               fixedWeekCount: false,
               showNonCurrentDates: false,
               dayCellClassNames: function(info) {
                   if (activeCabin === 1) {
                       return cabin1Events.some(event => moment(event.startDate).isSameOrBefore(info.date, 'day') && moment(event.endDate).isSameOrAfter(info.date, 'day')) ? 'booked' : 'available';
                   } else {
                       return cabin2Events.some(event => moment(event.startDate).isSameOrBefore(info.date, 'day') && moment(event.endDate).isSameOrAfter(info.date, 'day')) ? 'booked' : 'available';
                   }
               }
           });
           
           calendar.render();
       });
   </script>
</body>
</html>
// Functie om tussen cabines te wisselen
function switchCabin(cabinNumber) {
    if (cabinNumber === activeCabin) return;
    
    // Update actieve cabine
    activeCabin = cabinNumber;
    
    // Update knoppen
    document.getElementById('cabin1Button').classList.toggle('active', cabinNumber === 1);
    document.getElementById('cabin2Button').classList.toggle('active', cabinNumber === 2);
    
    if (cabinNumber === 1) {
        calendar.batchRendering(() => {
            calendar.setEvents(cabin1Events);
            calendar.setOption('dayCellClassNames', function(info) {
                return cabin1Events.some(event => moment(event.startDate).isSameOrBefore(info.date, 'day') && moment(event.endDate).isSameOrAfter(info.date, 'day')) ? 'booked' : 'available';
            });
        });
    } else {
        calendar.batchRendering(() => {
            calendar.setEvents(cabin2Events);
            calendar.setOption('dayCellClassNames', function(info) {
                return cabin2Events.some(event => moment(event.startDate).isSameOrBefore(info.date, 'day') && moment(event.endDate).isSameOrAfter(info.date, 'day')) ? 'booked' : 'available';
            });
        });
    }
}

// Overige functies...
function openBooking(cabinId) {
    activeCabinId = cabinId;
    document.getElementById('cabinId').value = cabinId;
    const modal = document.getElementById('bookingModal');
    modal.classList.add('active');
    document.getElementById('modalTitle').textContent = `Reserveer Strandcabine ${cabinId}`;
}

function closeModal() {
    document.getElementById('bookingModal').classList.remove('active');
    document.getElementById('idUploadModal').classList.remove('active');
    document.getElementById('paymentModal').classList.remove('active');
    document.getElementById('confirmationModal').classList.remove('active');
    const form = document.getElementById('bookingForm');
    if (form) form.reset();
}

function showIdUploadModal() {
    document.getElementById('bookingModal').classList.remove('active');
    document.getElementById('idUploadModal').classList.add('active');
}

function showPaymentOptions() {
    document.getElementById('idUploadModal').classList.remove('active');
    document.getElementById('paymentModal').classList.add('active');
    
    // Hide all payment options first
    document.querySelectorAll('#paymentModal [id^="payment-"]').forEach(el => {
        el.classList.add('hidden');
    });
    
    // Show the relevant payment option based on period
    if (formData.period) {
        const paymentDiv = document.getElementById(`payment-${formData.period}`);
        if (paymentDiv) {
            paymentDiv.classList.remove('hidden');
        }
    }
}

function showConfirmation() {
    document.getElementById('paymentModal').classList.remove('active');
    document.getElementById('confirmationModal').classList.add('active');
}

// Handle form submission with Formspree
document.getElementById('bookingForm').addEventListener('submit', function(event) {
    // ... (code blijft hetzelfde)
});

// Close modals when clicking outside
window.onclick = function(event) {
    if (event.target.classList.contains('modal')) {
        closeModal();
    }
}
// Initialiseer de kaart wanneer het document geladen is
document.addEventListener('DOMContentLoaded', function() {
    // Coördinaten: 51°19'04.1"N 3°07'58.5"E = 51.317806, 3.132917
    const lat = 51.317806;
    const lng = 3.132917;
    
    // Maak een nieuwe kaart in het "map" element
    const map = L.map('map').setView([lat, lng], 16);
    
    // Voeg de OpenStreetMap tile layer toe
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
    }).addTo(map);
    
    // Voeg een marker toe op de locatie
    const marker = L.marker([lat, lng]).addTo(map);
    
    // Voeg een popup toe
    marker.bindPopup("<strong>Strandcabines Blankenberge</strong><br>Hier vindt u onze strandcabines!").openPopup();
});
